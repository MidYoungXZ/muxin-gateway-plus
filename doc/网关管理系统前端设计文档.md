# Muxin Gateway ç®¡ç†ç³»ç»Ÿå‰ç«¯è®¾è®¡æ–‡æ¡£

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
Muxin Gatewayæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„APIç½‘å…³ç³»ç»Ÿï¼Œéœ€è¦ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç”¨æˆ·å‹å¥½çš„ç®¡ç†ç•Œé¢æ¥é…ç½®å’Œç›‘æ§ç½‘å…³çš„è¿è¡ŒçŠ¶æ€ã€‚æœ¬æ–‡æ¡£å®šä¹‰äº†ç®¡ç†ç³»ç»Ÿå‰ç«¯çš„è¯¦ç»†è®¾è®¡æ–¹æ¡ˆã€‚

### 1.2 è®¾è®¡ç›®æ ‡
- **æ˜“ç”¨æ€§**: ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œé™ä½å­¦ä¹ æˆæœ¬
- **å®æ—¶æ€§**: å®æ—¶å±•ç¤ºç½‘å…³è¿è¡ŒçŠ¶æ€å’Œç›‘æ§æ•°æ®
- **å¯æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **é«˜æ€§èƒ½**: ä¼˜åŒ–åŠ è½½é€Ÿåº¦å’Œè¿è¡Œæ€§èƒ½
- **å›½é™…åŒ–**: æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢

### 1.3 æŠ€æœ¯é€‰å‹ç†ç”±
- **Vue 3**: æ€§èƒ½ä¼˜ç§€ï¼ŒComposition APIæä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨ âœ…
- **Element Plus**: æˆç†Ÿçš„ä¼ä¸šçº§ç»„ä»¶åº“ï¼Œä¸Vue 3å®Œç¾é…åˆ âœ…
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ âŒï¼ˆæœªä½¿ç”¨ï¼‰
- **Vite**: æé€Ÿçš„å¼€å‘ä½“éªŒï¼Œä¼˜ç§€çš„æ‰“åŒ…æ€§èƒ½ âœ…
- **ECharts**: åŠŸèƒ½ä¸°å¯Œçš„å›¾è¡¨åº“ï¼Œæ»¡è¶³ç›‘æ§å¯è§†åŒ–éœ€æ±‚ âœ…

> **å®ç°çŠ¶æ€è¯´æ˜**ï¼š
> - âœ… è¡¨ç¤ºå·²å®ç°
> - ğŸš§ è¡¨ç¤ºéƒ¨åˆ†å®ç°
> - âŒ è¡¨ç¤ºæœªå®ç°

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æµè§ˆå™¨ç«¯                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vue 3 + Element Plus + TypeScript + ECharts + WebSocket    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Axios HTTP Client                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTPS/WSS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Spring Boot Backend                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   é™æ€èµ„æº   â”‚  â”‚   REST API    â”‚  â”‚  WebSocket   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å‰ç«¯åˆ†å±‚æ¶æ„
```
è¡¨ç°å±‚ (Views)
    â†“
è·¯ç”±å±‚ (Router)
    â†“
çŠ¶æ€ç®¡ç†å±‚ (Stores)
    â†“
æœåŠ¡å±‚ (API/Services)
    â†“
ç½‘ç»œå±‚ (Axios/WebSocket)
```

### 2.3 æ¨¡å—åˆ’åˆ†
```
å‰ç«¯åº”ç”¨
â”œâ”€â”€ å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ æ ·å¼ä¸»é¢˜
â”œâ”€â”€ è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ å¿˜è®°å¯†ç 
â”‚   â”œâ”€â”€ æƒé™æ§åˆ¶
â”‚   â””â”€â”€ Tokenç®¡ç†
â”œâ”€â”€ ç›‘æ§æ¨¡å—
â”‚   â”œâ”€â”€ å®æ—¶ç»Ÿè®¡
â”‚   â”œâ”€â”€ è·¯ç”±ç›‘æ§
â”‚   â””â”€â”€ è¿‡æ»¤å™¨ç›‘æ§
â”œâ”€â”€ è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ èŠ‚ç‚¹ç®¡ç†
â”‚   â”œâ”€â”€ è´Ÿè½½å‡è¡¡
â”‚   â”œâ”€â”€ è¿‡æ»¤å™¨é“¾
â”‚   â””â”€â”€ é…ç½®æ¨¡æ¿
â”œâ”€â”€ é‰´æƒæ¨¡å—
â”‚   â”œâ”€â”€ APIæƒé™
â”‚   â””â”€â”€ ç™½åå•
â””â”€â”€ ç³»ç»Ÿæ¨¡å—
    â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
    â”œâ”€â”€ è§’è‰²æƒé™
    â”œâ”€â”€ éƒ¨é—¨ç»„ç»‡
    â”œâ”€â”€ æ“ä½œæ—¥å¿—
    â””â”€â”€ ç³»ç»Ÿé…ç½®
```

## 3. åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 3.1 è®¤è¯æ¨¡å—

#### 3.1.1 ç™»å½•é¡µé¢ âœ…
```typescript
// ç™»å½•è¡¨å•æ¥å£
interface LoginForm {
  username: string;
  password: string;
  captcha: string;     // âŒ éªŒè¯ç æœªå®ç°
  captchaId: string;   // âŒ éªŒè¯ç æœªå®ç°
  rememberMe: boolean; // âŒ è®°ä½æˆ‘æœªå®ç°
}

// é¡µé¢è®¾è®¡è¦ç‚¹
- ç®€æ´ç¾è§‚çš„ç™»å½•ç•Œé¢ï¼Œçªå‡ºå“ç‰ŒLogo âœ…
- æ”¯æŒç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·ç™»å½• âŒï¼ˆä»…ç”¨æˆ·åï¼‰
- å›¾å½¢éªŒè¯ç ï¼ˆç™»å½•å¤±è´¥3æ¬¡åæ˜¾ç¤ºï¼‰âŒ
- è®°ä½ç”¨æˆ·ååŠŸèƒ½ âŒ
- å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢ âœ…
- ç™»å½•åŠ è½½çŠ¶æ€å±•ç¤º âœ…
- é”™è¯¯ä¿¡æ¯å‹å¥½æç¤º âœ…
- å¿«é€Ÿè·³è½¬æ³¨å†Œ/å¿˜è®°å¯†ç  âŒï¼ˆæ— æ³¨å†Œå’Œå¿˜è®°å¯†ç ï¼‰

// ç™»å½•é¡µé¢å¸ƒå±€
<template>
  <div class="login-container">
    <div class="login-box">
      <div class="login-header">
        <img src="/logo.svg" alt="Logo">
        <h1>Muxin Gateway</h1>
      </div>
      <el-form ref="loginForm" :model="form" :rules="rules">
        <el-form-item prop="username">
          <el-input 
            v-model="form.username" 
            placeholder="ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·"
            prefix-icon="User"
          />
        </el-form-item>
        <el-form-item prop="password">
          <el-input 
            v-model="form.password" 
            type="password"
            placeholder="å¯†ç "
            prefix-icon="Lock"
            show-password
          />
        </el-form-item>
        <el-form-item v-if="showCaptcha" prop="captcha">
          <el-row :gutter="10">
            <el-col :span="16">
              <el-input v-model="form.captcha" placeholder="éªŒè¯ç "/>
            </el-col>
            <el-col :span="8">
              <img :src="captchaUrl" @click="refreshCaptcha">
            </el-col>
          </el-row>
        </el-form-item>
        <el-form-item>
          <el-checkbox v-model="form.rememberMe">è®°ä½ç”¨æˆ·å</el-checkbox>
          <el-link style="float: right" @click="toForgotPassword">å¿˜è®°å¯†ç ï¼Ÿ</el-link>
        </el-form-item>
        <el-form-item>
          <el-button type="primary" :loading="loading" @click="handleLogin" style="width: 100%">
            ç™»å½•
          </el-button>
        </el-form-item>
        <el-form-item>
          <span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
          <el-link @click="toRegister">ç«‹å³æ³¨å†Œ</el-link>
        </el-form-item>
      </el-form>
    </div>
  </div>
</template>
```

#### 3.1.2 æ³¨å†Œé¡µé¢ âŒ
```typescript
// æ³¨å†Œè¡¨å•æ¥å£
interface RegisterForm {
  username: string;
  password: string;
  confirmPassword: string;
  email: string;
  phone?: string;
  captcha: string;
  emailCode?: string;     // é‚®ç®±éªŒè¯ç 
  agreement: boolean;
}

// é¡µé¢è®¾è®¡è¦ç‚¹
- åˆ†æ­¥æ³¨å†Œæµç¨‹ï¼ˆåŸºæœ¬ä¿¡æ¯ -> é‚®ç®±éªŒè¯ -> å®Œæˆï¼‰
- å®æ—¶è¡¨å•éªŒè¯
- å¯†ç å¼ºåº¦æç¤º
- ç”¨æˆ·åå®æ—¶å¯ç”¨æ€§æ£€æŸ¥
- é‚®ç®±/æ‰‹æœºéªŒè¯ç å‘é€
- ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–å±•ç¤º
- æ³¨å†ŒæˆåŠŸè‡ªåŠ¨è·³è½¬ç™»å½•

// æ³¨å†Œè¡¨å•éªŒè¯è§„åˆ™
const rules = {
  username: [
    { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å' },
    { min: 4, max: 20, message: 'ç”¨æˆ·åé•¿åº¦åœ¨4-20ä¸ªå­—ç¬¦' },
    { pattern: /^[a-zA-Z0-9_]+$/, message: 'ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿' },
    { validator: checkUsernameAvailable, trigger: 'blur' }
  ],
  password: [
    { required: true, message: 'è¯·è¾“å…¥å¯†ç ' },
    { min: 8, max: 20, message: 'å¯†ç é•¿åº¦åœ¨8-20ä¸ªå­—ç¬¦' },
    { validator: checkPasswordStrength, trigger: 'change' }
  ],
  confirmPassword: [
    { required: true, message: 'è¯·å†æ¬¡è¾“å…¥å¯†ç ' },
    { validator: checkPasswordMatch, trigger: 'blur' }
  ],
  email: [
    { required: true, message: 'è¯·è¾“å…¥é‚®ç®±' },
    { type: 'email', message: 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼å¼' }
  ],
  emailCode: [
    { required: true, message: 'è¯·è¾“å…¥é‚®ç®±éªŒè¯ç ' },
    { len: 6, message: 'éªŒè¯ç ä¸º6ä½æ•°å­—' }
  ],
  agreement: [
    { validator: (rule, value) => value === true, message: 'è¯·åŒæ„ç”¨æˆ·åè®®' }
  ]
};

// å¯†ç å¼ºåº¦è®¡ç®—
const getPasswordStrength = (password: string): PasswordStrength => {
  let strength = 0;
  if (password.length >= 8) strength++;
  if (password.length >= 12) strength++;
  if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
  if (/\d/.test(password)) strength++;
  if (/[!@#$%^&*]/.test(password)) strength++;
  
  if (strength <= 2) return 'weak';
  if (strength <= 4) return 'medium';
  return 'strong';
};
```

#### 3.1.3 å¿˜è®°å¯†ç  âŒ
```typescript
// é‡ç½®å¯†ç æµç¨‹
interface ResetPasswordForm {
  account: string;        // ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·
  verifyType: 'email' | 'phone';
  verifyCode: string;
  newPassword: string;
  confirmPassword: string;
}

// é¡µé¢è®¾è®¡
- æ­¥éª¤1ï¼šè¾“å…¥è´¦å·ä¿¡æ¯
- æ­¥éª¤2ï¼šé€‰æ‹©éªŒè¯æ–¹å¼ï¼ˆé‚®ç®±/æ‰‹æœºï¼‰
- æ­¥éª¤3ï¼šè¾“å…¥éªŒè¯ç 
- æ­¥éª¤4ï¼šè®¾ç½®æ–°å¯†ç 
- æˆåŠŸåè·³è½¬ç™»å½•é¡µ
```

#### 3.1.4 å®‰å…¨æœºåˆ¶ ğŸš§
```typescript
// ç™»å½•å®‰å…¨ç­–ç•¥
interface SecurityConfig {
  maxLoginAttempts: number;          // æœ€å¤§ç™»å½•å°è¯•æ¬¡æ•° âŒ
  lockoutDuration: number;           // è´¦å·é”å®šæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰âŒ
  captchaThreshold: number;          // æ˜¾ç¤ºéªŒè¯ç çš„å¤±è´¥æ¬¡æ•° âŒ
  passwordPolicy: {                  // å¯†ç ç­–ç•¥ âŒ
    minLength: number;
    requireUppercase: boolean;
    requireLowercase: boolean;
    requireNumbers: boolean;
    requireSpecialChars: boolean;
    maxAge: number;                  // å¯†ç æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰
  };
  sessionTimeout: number;            // ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰âœ…ï¼ˆSa-Tokenç®¡ç†ï¼‰
  concurrentSessions: boolean;       // æ˜¯å¦å…è®¸å¹¶å‘ä¼šè¯ âœ…
}

// ç™»å½•æ—¥å¿—è®°å½•
interface LoginLog {
  id: number;
  username: string;
  loginTime: Date;
  loginIp: string;
  userAgent: string;
  loginStatus: 'success' | 'failed';
  failReason?: string;
  location?: string;                 // IPåœ°ç†ä½ç½®
}
```

### 3.2 ç›‘æ§å¤§å± ğŸš§

#### 3.2.1 å®æ—¶è¯·æ±‚ç»Ÿè®¡ ğŸš§
```typescript
// æ•°æ®ç»“æ„
interface RealtimeStats {
  timestamp: number;
  metrics: {
    requestsPerSecond: number;    // QPS âŒ
    totalRequests: number;        // æ€»è¯·æ±‚æ•° ğŸš§
    avgResponseTime: number;      // å¹³å‡å“åº”æ—¶é—´(ms) ğŸš§
    errorRate: number;           // é”™è¯¯ç‡(%) ğŸš§
    activeConnections: number;    // æ´»è·ƒè¿æ¥æ•° âŒ
  };
  statusCodeDistribution: {      // çŠ¶æ€ç åˆ†å¸ƒ âŒ
    '2xx': number;
    '3xx': number;
    '4xx': number;
    '5xx': number;
  };
}

// å›¾è¡¨é…ç½®
- å®æ—¶QPSæŠ˜çº¿å›¾ (æ¯ç§’æ›´æ–°) âŒ
- å“åº”æ—¶é—´åˆ†å¸ƒå›¾ (æŸ±çŠ¶å›¾) âŒ
- é”™è¯¯ç‡è¶‹åŠ¿å›¾ (é¢ç§¯å›¾) âŒ
- çŠ¶æ€ç åˆ†å¸ƒé¥¼å›¾ âŒ
```

å®é™…å®ç°ï¼š
- âœ… ç›‘æ§é¡µé¢æ¡†æ¶
- âœ… EChartsé›†æˆ
- âœ… WebSocketè¿æ¥
- âŒ å®æ—¶æ•°æ®æ¨é€
- âŒ å›¾è¡¨æ•°æ®æ›´æ–°

#### 3.2.2 è·¯ç”±è°ƒç”¨ç›‘æ§ âŒ
```typescript
interface RouteMetrics {
  routeId: string;
  routeName: string;
  callCount: number;
  avgResponseTime: number;
  p95ResponseTime: number;
  p99ResponseTime: number;
  errorCount: number;
  errorRate: number;
  lastCallTime: Date;
}

// åŠŸèƒ½è®¾è®¡
- TOP 10 çƒ­é—¨è·¯ç”±æ’è¡Œ
- TOP 10 æ…¢å“åº”è·¯ç”±
- è·¯ç”±è°ƒç”¨è¶‹åŠ¿å›¾ï¼ˆå¯é€‰æ‹©æ—¶é—´èŒƒå›´ï¼‰
- å¼‚å¸¸è·¯ç”±å‘Šè­¦åˆ—è¡¨
```

#### 3.2.3 è¿‡æ»¤å™¨å‘½ä¸­ç›‘æ§ âŒ
```typescript
interface FilterMetrics {
  filterId: string;
  filterName: string;
  filterType: 'PRE' | 'POST' | 'ERROR';
  hitCount: number;
  blockCount: number;  // æ‹¦æˆªæ•°
  avgProcessTime: number;
  lastHitTime: Date;
}

// å±•ç¤ºå†…å®¹
- è¿‡æ»¤å™¨å‘½ä¸­ç‡æ’è¡Œ
- é™æµæ‹¦æˆªç»Ÿè®¡
- é‰´æƒå¤±è´¥ç»Ÿè®¡
- è¿‡æ»¤å™¨å¤„ç†è€—æ—¶åˆ†æ
```

### 3.3 è·¯ç”±ç®¡ç† âœ…

#### 3.3.1 è·¯ç”±åˆ—è¡¨ âœ…
```typescript
interface Route {
  id: number;
  routeId: string;                âœ…
  name: string;                   âœ…
  description: string;            âœ…
  uri: string;                    âœ…
  predicates: RoutePredicate[];   âœ…
  filters: RouteFilter[];         âœ…
  metadata: Record<string, any>;  âœ…
  order: number;                  âœ…
  enabled: boolean;               âœ…
  grayscaleEnabled: boolean;      âŒï¼ˆç°åº¦æœªå®ç°ï¼‰
  grayscaleConfig?: GrayscaleConfig; âŒ
  templateId?: number;            âŒï¼ˆæ¨¡æ¿æœªå®ç°ï¼‰
  createdTime: Date;              âœ…
  updatedTime: Date;              âœ…
}

// åŠŸèƒ½ç‚¹
- åˆ†é¡µå±•ç¤ºè·¯ç”±åˆ—è¡¨ âœ…
- æ”¯æŒæŒ‰åç§°ã€URIã€çŠ¶æ€ç­›é€‰ âœ…
- æ‰¹é‡å¯ç”¨/ç¦ç”¨ âŒ
- å¯¼å…¥å¯¼å‡ºé…ç½®ï¼ˆJSON/YAMLï¼‰âŒ
- å¿«é€Ÿå¤åˆ¶è·¯ç”± âŒ
- é…ç½®ç‰ˆæœ¬å¯¹æ¯” âŒ
```

#### 3.3.2 è·¯ç”±æµ‹è¯•å·¥å…· âŒ
```vue
<template>
  <div class="route-tester">
    <el-form>
      <el-form-item label="è¯·æ±‚æ–¹æ³•">
        <el-select v-model="method">
          <el-option value="GET"/>
          <el-option value="POST"/>
          <el-option value="PUT"/>
          <el-option value="DELETE"/>
        </el-select>
      </el-form-item>
      <el-form-item label="è¯·æ±‚è·¯å¾„">
        <el-input v-model="path"/>
      </el-form-item>
      <el-form-item label="è¯·æ±‚å¤´">
        <HeaderEditor v-model="headers"/>
      </el-form-item>
      <el-form-item label="è¯·æ±‚ä½“">
        <CodeEditor v-model="body" language="json"/>
      </el-form-item>
    </el-form>
    
    <div class="test-result">
      <!-- å±•ç¤ºè·¯ç”±åŒ¹é…ç»“æœã€è¿‡æ»¤å™¨æ‰§è¡Œé“¾ã€æœ€ç»ˆå“åº” -->
    </div>
  </div>
</template>
```

#### 3.3.3 é…ç½®æ¨¡æ¿ç®¡ç† âŒ
```typescript
interface RouteTemplate {
  id: number;
  name: string;
  description: string;
  category: string;          // æ¨¡æ¿åˆ†ç±»
  config: {
    predicates: RoutePredicate[];
    filters: RouteFilter[];
    metadata: Record<string, any>;
  };
  variables: {              // æ¨¡æ¿å˜é‡
    name: string;
    type: 'string' | 'number' | 'boolean';
    defaultValue: any;
    required: boolean;
    description: string;
  }[];
  isSystem: boolean;        // ç³»ç»Ÿå†…ç½®æ¨¡æ¿
  usageCount: number;       // ä½¿ç”¨æ¬¡æ•°
}

// åŠŸèƒ½è®¾è®¡
- æ¨¡æ¿åº“ç®¡ç†ï¼ˆç³»ç»Ÿæ¨¡æ¿ + è‡ªå®šä¹‰æ¨¡æ¿ï¼‰
- ä»ç°æœ‰è·¯ç”±åˆ›å»ºæ¨¡æ¿
- æ¨¡æ¿é¢„è§ˆå’Œæµ‹è¯•
- æ¨¡æ¿å˜é‡å¡«å……ç•Œé¢
- æ¨¡æ¿ä½¿ç”¨ç»Ÿè®¡
```

### 3.4 è´Ÿè½½å‡è¡¡é…ç½® ğŸš§
```typescript
interface LoadBalanceConfig {
  routeId: string;
  strategy: 'ROUND_ROBIN' | 'WEIGHTED' | 'LEAST_CONN' | 'IP_HASH' | 'RANDOM'; // ä»…ROUND_ROBINå®ç°
  nodes: {
    nodeId: string;       âœ…
    address: string;      âœ…
    weight: number;       âœ…ï¼ˆæœªä½¿ç”¨ï¼‰
    maxFails: number;     âŒ
    failTimeout: number;  âŒ
    backup: boolean;      âŒ
  }[];
  healthCheck: {         âŒï¼ˆå¥åº·æ£€æŸ¥æœªå®ç°ï¼‰
    enabled: boolean;
    interval: number;
    timeout: number;
    path: string;
    expectedStatus: number[];
  };
}

// UIè®¾è®¡
- å¯è§†åŒ–èŠ‚ç‚¹æƒé‡é…ç½®ï¼ˆæ»‘å—è°ƒæ•´ï¼‰âŒ
- å®æ—¶èŠ‚ç‚¹å¥åº·çŠ¶æ€å±•ç¤º âŒ
- è´Ÿè½½ç­–ç•¥è¯´æ˜å’Œæœ€ä½³å®è·µ âŒ
- èŠ‚ç‚¹æµé‡åˆ†å¸ƒå®æ—¶å›¾è¡¨ âŒ
```

### 3.5 è¿‡æ»¤å™¨ç®¡ç† ğŸš§
```typescript
interface FilterChain {
  routeId: string;
  filters: {
    id: string;
    name: string;
    type: string;
    order: number;
    enabled: boolean;
    config: Record<string, any>;
  }[];
}

// è¿‡æ»¤å™¨ç±»å‹
- è¯·æ±‚å¤´å¤„ç† (AddRequestHeader, RemoveRequestHeader) âŒ
- è·¯å¾„å¤„ç† (StripPrefix, RewritePath) âœ…ï¼ˆä»…StripPrefixï¼‰
- é™æµ (RequestRateLimiter) âŒ
- ç†”æ–­ (CircuitBreaker) âŒ
- é‡è¯• (Retry) âŒ
- é‰´æƒ (Auth) âŒ

// UIäº¤äº’
- æ‹–æ‹½è°ƒæ•´è¿‡æ»¤å™¨é¡ºåº âŒ
- è¿‡æ»¤å™¨é…ç½®è¡¨å•åŠ¨æ€ç”Ÿæˆ âœ…
- è¿‡æ»¤å™¨æ•ˆæœå®æ—¶é¢„è§ˆ âŒ
- è¿‡æ»¤å™¨æ¨¡æ¿å¿«é€Ÿåº”ç”¨ âŒ
```

### 3.6 é‰´æƒè§„åˆ™é…ç½® âŒ
```typescript
// æ•´ä¸ªé‰´æƒè§„åˆ™æ¨¡å—æœªå®ç°
```

### 3.7 ç³»ç»Ÿç®¡ç†

#### 3.7.1 ç”¨æˆ·ç®¡ç† âœ…
```typescript
interface User {
  id: number;              âœ…
  username: string;        âœ…
  nickname: string;        âœ…
  email: string;           âœ…
  phone: string;           âœ…
  avatar: string;          âœ…
  roles: Role[];           âœ…
  department: Department;  âŒï¼ˆéƒ¨é—¨æœªå®ç°ï¼‰
  status: 'active' | 'inactive' | 'locked'; âœ…
  lastLoginTime: Date;     âœ…
  createdTime: Date;       âœ…
}

// åŠŸèƒ½åˆ—è¡¨
- ç”¨æˆ·CRUDæ“ä½œ âœ…
- æ‰¹é‡è§’è‰²åˆ†é… âœ…
- å¯†ç é‡ç½® âœ…
- ç™»å½•å†å²æŸ¥çœ‹ ğŸš§ï¼ˆåŸºç¡€å®ç°ï¼‰
- åœ¨çº¿ç”¨æˆ·ç®¡ç† âŒ
```

#### 3.7.2 æƒé™ç®¡ç† âœ…
```typescript
interface Permission {
  id: number;                     âœ…
  code: string;                   âœ…
  name: string;                   âœ…
  type: 'menu' | 'button' | 'api'; âœ…
  parentId: number;               âœ…
  path?: string;                  âœ…
  component?: string;             âœ…
  icon?: string;                  âœ…
  order: number;                  âœ…
  visible: boolean;               âœ…
  cached: boolean;                âŒ
  resources: string[];            âŒ
}

// æƒé™æ ‘ç»“æ„å±•ç¤º
- èœå•æƒé™é…ç½® âœ…
- æŒ‰é’®æƒé™æ§åˆ¶ âŒï¼ˆæƒé™éªŒè¯å·²ç¦ç”¨ï¼‰
- APIæƒé™æ˜ å°„ âŒ
- æ•°æ®æƒé™è§„åˆ™ âŒ
```

#### 3.7.3 ç°åº¦å‘å¸ƒé…ç½® âŒ
```typescript
// æ•´ä¸ªç°åº¦å‘å¸ƒåŠŸèƒ½æœªå®ç°
```

## 4. äº¤äº’è®¾è®¡

### 4.1 é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Logo  â”‚          é¡¶éƒ¨å¯¼èˆªæ           â”‚ ç”¨æˆ·ä¿¡æ¯     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        â”‚                                            â”‚
â”‚  ä¾§è¾¹  â”‚              ä¸»å†…å®¹åŒº                       â”‚
â”‚  èœå•  â”‚                                            â”‚
â”‚        â”‚                                            â”‚
â”‚        â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 äº¤äº’è§„èŒƒ
- **LoadingçŠ¶æ€**: æ‰€æœ‰å¼‚æ­¥æ“ä½œæ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯æç¤ºæ ·å¼
- **ç¡®è®¤æ“ä½œ**: å±é™©æ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤
- **è¡¨å•éªŒè¯**: å®æ—¶éªŒè¯ + æäº¤éªŒè¯
- **å¿«æ·é”®**: æ”¯æŒå¸¸ç”¨å¿«æ·é”®æ“ä½œ

### 4.3 å“åº”å¼è®¾è®¡
- æœ€å°æ”¯æŒåˆ†è¾¨ç‡: 1366x768
- å¤§å±è‡ªé€‚åº”: 1920x1080, 2560x1440
- ä¸æ”¯æŒç§»åŠ¨ç«¯ï¼ˆç®¡ç†ç³»ç»Ÿç‰¹æ€§ï¼‰

## 5. æ€§èƒ½ä¼˜åŒ–

### 5.1 åŠ è½½ä¼˜åŒ–
- è·¯ç”±æ‡’åŠ è½½ âœ…
- ç»„ä»¶å¼‚æ­¥åŠ è½½ âŒ
- é™æ€èµ„æºCDNï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰âŒ
- Gzipå‹ç¼© âŒ
- å›¾ç‰‡æ‡’åŠ è½½ âŒ

### 5.2 è¿è¡Œæ—¶ä¼˜åŒ–
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®è¡¨æ ¼ï¼‰âŒ
- é˜²æŠ–èŠ‚æµï¼ˆæœç´¢ã€æ»šåŠ¨ï¼‰âœ…
- ç»„ä»¶ç¼“å­˜ï¼ˆkeep-aliveï¼‰âŒ
- çŠ¶æ€æŒä¹…åŒ–ï¼ˆlocalStorageï¼‰âœ…

### 5.3 æ‰“åŒ…ä¼˜åŒ– âŒ
```javascript
// vite.config.ts
// æœªè¿›è¡Œæ‰“åŒ…ä¼˜åŒ–é…ç½®
```

## 6. å®‰å…¨è®¾è®¡

### 6.1 è®¤è¯å®‰å…¨
- JWT Tokenå­˜å‚¨åœ¨å†…å­˜ + localStorageï¼ˆä»…å­˜å‚¨åŠ å¯†åçš„Tokenï¼‰âŒï¼ˆä½¿ç”¨Sa-Tokenï¼‰
- Refresh Tokenæœºåˆ¶ï¼Œæ”¯æŒæ— æ„Ÿåˆ·æ–° âŒ
- ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶ï¼Œè¶…è¿‡é˜ˆå€¼æ˜¾ç¤ºéªŒè¯ç  âŒ
- è´¦å·é”å®šæœºåˆ¶ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£ âŒ
- ä¼šè¯è¶…æ—¶è‡ªåŠ¨ç™»å‡º âœ…
- å¼‚åœ°ç™»å½•æ£€æµ‹å’Œæé†’ âŒ
- è®¾å¤‡æŒ‡çº¹è¯†åˆ« âŒ

### 6.2 æ•°æ®å®‰å…¨
- æ•æ„Ÿæ•°æ®è„±æ•æ˜¾ç¤º âŒ
- APIè¯·æ±‚ç­¾åéªŒè¯ âŒ
- é˜²æ­¢XSSæ”»å‡» âŒ
- é˜²æ­¢CSRFæ”»å‡» âœ…ï¼ˆSa-Tokenè‡ªå¸¦ï¼‰

### 6.3 æƒé™æ§åˆ¶
- è·¯ç”±çº§æƒé™æ§åˆ¶ âœ…
- æŒ‰é’®çº§æƒé™æ§åˆ¶ âŒï¼ˆæƒé™éªŒè¯å·²ç¦ç”¨ï¼‰
- APIçº§æƒé™æ§åˆ¶ âŒï¼ˆæƒé™éªŒè¯å·²ç¦ç”¨ï¼‰
- æ•°æ®çº§æƒé™æ§åˆ¶ âŒ

## 7. æµ‹è¯•ç­–ç•¥

### 7.1 å•å…ƒæµ‹è¯•
```typescript
// ç¤ºä¾‹ï¼šè·¯ç”±é…ç½®ç»„ä»¶æµ‹è¯•
describe('RouteConfig.vue', () => {
  it('should validate route form', async () => {
    const wrapper = mount(RouteConfig);
    await wrapper.find('#route-name').setValue('');
    await wrapper.find('#submit-btn').trigger('click');
    expect(wrapper.find('.el-form-item__error').text())
      .toBe('è·¯ç”±åç§°ä¸èƒ½ä¸ºç©º');
  });
});
```

### 7.2 é›†æˆæµ‹è¯•
- APIé›†æˆæµ‹è¯•
- WebSocketè¿æ¥æµ‹è¯•
- è·¯ç”±è·³è½¬æµ‹è¯•
- æƒé™æ§åˆ¶æµ‹è¯•

### 7.3 E2Eæµ‹è¯•
```typescript
// Cypressç¤ºä¾‹
describe('Route Management', () => {
  it('should create new route', () => {
    cy.login('admin', 'admin123');
    cy.visit('/routes');
    cy.contains('æ–°å¢è·¯ç”±').click();
    cy.get('#route-name').type('test-route');
    cy.get('#route-uri').type('http://example.com');
    cy.contains('ç¡®å®š').click();
    cy.contains('åˆ›å»ºæˆåŠŸ');
  });
});
```

## 8. éƒ¨ç½²æ–¹æ¡ˆ

### 8.1 æ„å»ºæµç¨‹
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# æ„å»ºäº§ç‰©è¾“å‡ºåˆ°
../gateway-admin/src/main/resources/static/
```

### 8.2 ç¯å¢ƒé…ç½®
```typescript
// ç¯å¢ƒå˜é‡é…ç½®
const envConfig = {
  development: {
    apiBaseUrl: 'http://localhost:8080/api',
    wsUrl: 'ws://localhost:8080/ws'
  },
  production: {
    apiBaseUrl: '/api',
    wsUrl: `ws://${window.location.host}/ws`
  }
};
```

### 8.3 éƒ¨ç½²æ£€æŸ¥æ¸…å•
- [ ] ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®
- [ ] é™æ€èµ„æºè·¯å¾„æ­£ç¡®
- [ ] APIæ¥å£åœ°å€æ­£ç¡®
- [ ] WebSocketåœ°å€æ­£ç¡®
- [ ] é”™è¯¯æ—¥å¿—æ”¶é›†é…ç½®
- [ ] æ€§èƒ½ç›‘æ§é…ç½®

## 9. ç»´æŠ¤ä¸æ‰©å±•

### 9.1 ä»£ç è§„èŒƒ
- ESLint + Prettieré…ç½®
- Gitæäº¤è§„èŒƒï¼ˆConventional Commitsï¼‰
- ä»£ç å®¡æŸ¥è¦æ±‚

### 9.2 æ–‡æ¡£ç»´æŠ¤
- APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- ç»„ä»¶æ–‡æ¡£ï¼ˆStorybookï¼‰
- ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ

### 9.3 ç‰ˆæœ¬ç®¡ç†
- è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- å˜æ›´æ—¥å¿—ç»´æŠ¤
- ç‰ˆæœ¬å…¼å®¹æ€§è¯´æ˜

## 10. é¡¹ç›®é‡Œç¨‹ç¢‘

### Phase 1: åŸºç¡€åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
- [x] é¡¹ç›®æ­å»ºå’ŒåŸºç¡€æ¶æ„ âœ…
- [x] ç™»å½•è®¤è¯å’Œæƒé™æ¡†æ¶ âœ…ï¼ˆæƒé™éªŒè¯å·²ç¦ç”¨ï¼‰
- [x] åŸºç¡€é¡µé¢å¸ƒå±€ âœ…

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ï¼ˆ3å‘¨ï¼‰
- [ ] ç›‘æ§å¤§å±å®ç° ğŸš§ï¼ˆæ¡†æ¶å®ç°ï¼Œæ•°æ®æœªé›†æˆï¼‰
- [x] è·¯ç”±ç®¡ç†åŠŸèƒ½ âœ…
- [ ] è¿‡æ»¤å™¨é…ç½® ğŸš§ï¼ˆåŸºç¡€å®ç°ï¼‰

### Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
- [ ] é…ç½®æ¨¡æ¿ç³»ç»Ÿ âŒ
- [ ] ç°åº¦å‘å¸ƒåŠŸèƒ½ âŒ
- [ ] WebSocketå®æ—¶é€šä¿¡ âœ…ï¼ˆæ¡†æ¶å®ç°ï¼Œæ•°æ®æœªé›†æˆï¼‰

### Phase 4: å®Œå–„ä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ– âŒ
- [ ] å›½é™…åŒ–å®Œå–„ âŒ
- [ ] æµ‹è¯•å®Œå–„ âŒ

## 11. é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
- WebSocketè¿æ¥ç¨³å®šæ€§
- å¤§æ•°æ®é‡æ¸²æŸ“æ€§èƒ½
- æµè§ˆå™¨å…¼å®¹æ€§

### ç¼“è§£æªæ–½
- WebSocketæ–­çº¿é‡è¿æœºåˆ¶
- è™šæ‹Ÿæ»šåŠ¨ + åˆ†é¡µåŠ è½½
- é™çº§æ–¹æ¡ˆå‡†å¤‡

## 12. æ€»ç»“

æœ¬è®¾è®¡æ–‡æ¡£å®šä¹‰äº†Muxin Gatewayç®¡ç†ç³»ç»Ÿå‰ç«¯çš„å®Œæ•´æ¶æ„å’Œå®ç°æ–¹æ¡ˆã€‚é€šè¿‡æ¨¡å—åŒ–è®¾è®¡ã€ç»Ÿä¸€çš„æŠ€æœ¯æ ˆå’Œè§„èŒƒçš„å¼€å‘æµç¨‹ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚åç»­å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ¬æ–‡æ¡£å°†æŒç»­æ›´æ–°å’Œå®Œå–„ã€‚ 